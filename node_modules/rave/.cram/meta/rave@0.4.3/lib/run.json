{"absId":"rave@0.4.3/lib/run","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/run","loader":true,"source":"define('rave@0.4.3/lib/run',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar normalizeCjs = require('../pipeline/normalizeCjs');\nvar locateAsIs = require('../pipeline/locateAsIs');\nvar fetchAsText = require('../pipeline/fetchAsText');\nvar translateAsIs = require('../pipeline/translateAsIs');\nvar instantiateJs = require('./debug/instantiateJS');\nvar instantiators = require('./debug/instantiators');\nvar applyLoaderHooks = require('./run/applyLoaderHooks');\nvar configureLoader = require('./run/configureLoader');\nvar gatherExtensions = require('./run/gatherExtensions');\nvar applyFirstMain = require('./run/applyFirstMain');\nvar initApplication = require('./run/initApplication');\n\nmodule.exports = {\n\tmain: main,\n\tapplyLoaderHooks: applyLoaderHooks\n};\n\nvar defaultMeta = 'bower.json,package.json';\n\nfunction main (context) {\n\tvar applyLoaderHooks;\n\tvar baseHooks = {\n\t\tnormalize: normalizeCjs,\n\t\tlocate: locateAsIs,\n\t\tfetch: fetchAsText,\n\t\ttranslate: translateAsIs,\n\t\tinstantiate: instantiateJs(getInstantiator)\n\t};\n\n\tapplyLoaderHooks = this.applyLoaderHooks;\n\n\treturn done(context)\n\t\t['catch'](failHard);\n\n\tfunction done (context) {\n\n\t\treturn configureLoader(baseHooks)(context)\n\t\t\t.then(evalPredefines)\n\t\t\t.then(gatherExtensions)\n\t\t\t.then(function (extensions) {\n\t\t\t\treturn applyLoaderHooks(context, extensions);\n\t\t\t})\n\t\t\t.then(function (extensions) {\n\t\t\t\treturn applyFirstMain(context, extensions);\n\t\t\t})\n\t\t\t.then(function (alreadyRanMain) {\n\t\t\t\treturn !alreadyRanMain && initApplication(context);\n\t\t\t});\n\t}\n}\n\nfunction getInstantiator (moduleType) {\n\treturn instantiators[moduleType];\n}\n\nfunction failHard (ex) {\n\tsetTimeout(function () { throw ex; }, 0);\n}\n\nfunction evalPredefines (context) {\n\treturn context.evalPredefines\n\t\t? context.evalPredefines(context)\n\t\t: context;\n}\n\n});\n\n","modules":[{"pos":0,"count":98,"id":"rave@0.4.3/lib/run","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/pipeline/normalizeCjs","pos":238,"count":35},{"id":"rave@0.4.3/pipeline/locateAsIs","pos":292,"count":33},{"id":"rave@0.4.3/pipeline/fetchAsText","pos":345,"count":34},{"id":"rave@0.4.3/pipeline/translateAsIs","pos":401,"count":36},{"id":"rave@0.4.3/lib/debug/instantiateJS","pos":459,"count":32},{"id":"rave@0.4.3/lib/debug/instantiators","pos":513,"count":32},{"id":"rave@0.4.3/lib/run/applyLoaderHooks","pos":570,"count":33},{"id":"rave@0.4.3/lib/run/configureLoader","pos":627,"count":32},{"id":"rave@0.4.3/lib/run/gatherExtensions","pos":684,"count":33},{"id":"rave@0.4.3/lib/run/applyFirstMain","pos":740,"count":31},{"id":"rave@0.4.3/lib/run/initApplication","pos":795,"count":32}]}],"compileTime":"2014-11-17T20:58:47.378Z"}