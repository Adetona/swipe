{"absId":"rave@0.4.3/lib/amd/bundle","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/amd/bundle","loader":true,"source":"define('rave@0.4.3/lib/amd/bundle',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar metadata = require('../metadata');\nvar createUid = require('../uid').create;\nvar amdFactory = require('./factory');\n\nexports.process = process;\n\n// TODO: replace this sync algorithm with one that is based on register()\n// if (defines.named.length <= 1) process as before\n// else loop through defines and eval all modules sync,\n//   returning the one whose name matches load.name\n\n// TODO: register-based algorithm\n//if (defines.anon) register(defines.anon, load.name);\n//defines.named.forEach(function (def) {\n// register(def);\n//});\n\nfunction process (load, defines) {\n\tvar mainDefine, i;\n\n\tfor (i = 0; i < defines.length; i++) {\n\t\tmainDefine = processOne(load, defines[i]) || mainDefine;\n\t}\n\n\treturn mainDefine;\n\n}\n\nfunction processOne (load, define) {\n\tvar loader, packages, name, uid, defLoad, value;\n\n\tloader = load.metadata.rave.loader;\n\tpackages = load.metadata.rave.packages;\n\tname = define.name;\n\tuid = getUid(packages, name);\n\n\tif (uid === load.name) {\n\t\treturn define;\n\t}\n\telse {\n\t\tdefLoad = Object.create(load);\n\t\tdefLoad.name = uid;\n\t\tdefLoad.address = load.address + '#' + encodeURIComponent(name);\n\t\tvalue = amdFactory(loader, define, defLoad)();\n\t\tloader.set(uid, new Module(value));\n\t}\n}\n\nfunction getUid (packages, name) {\n\tvar pkg = metadata.findPackage(packages, name);\n\treturn createUid(pkg, name);\n}\n\n});\n\n","modules":[{"pos":0,"count":105,"id":"rave@0.4.3/lib/amd/bundle","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/metadata","pos":241,"count":22},{"id":"rave@0.4.3/lib/uid","pos":281,"count":17},{"id":"rave@0.4.3/lib/amd/factory","pos":324,"count":20}]}],"compileTime":"2014-11-17T20:58:47.375Z"}