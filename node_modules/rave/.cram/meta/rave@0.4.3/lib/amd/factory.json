{"absId":"rave@0.4.3/lib/amd/factory","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/amd/factory","loader":true,"source":"define('rave@0.4.3/lib/amd/factory',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\nmodule.exports = amdFactory;\n\nvar es5Transform = require('./../es5Transform');\nvar createRequire = require('./../createRequire');\n\nfunction amdFactory (loader, defineArgs, load) {\n\tvar cjsRequire, require, exports, module, scopedVars;\n\n\tcjsRequire = createRequire(loader, load.name);\n\trequire = amdRequire;\n\trequire.async = cjsRequire.async;\n\trequire.named = cjsRequire.named;\n\n\texports = {};\n\tmodule = {\n\t\texports: exports,\n\t\tid: load.name,\n\t\turi: load.address,\n\t\tconfig: function () {\n\t\t\treturn load.metadata.rave;\n\t\t}\n\t};\n\tscopedVars = {\n\t\trequire: require,\n\t\tmodule: module,\n\t\texports: exports\n\t};\n\n\treturn function () {\n\t\tvar args, len, result;\n\n\t\targs = [];\n\t\tlen = defineArgs.depsList ? defineArgs.depsList.length : 0;\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\targs.push(requireSync(defineArgs.depsList[i]));\n\t\t}\n\n\t\tresult = defineArgs.factory.apply(null, args);\n\n\t\t// AMD factory result trumps all. if it's undefined, we\n\t\t// may be using CommonJS syntax.\n\t\tif (typeof result !== 'undefined' || !hasCjsExports(defineArgs)) {\n\t\t\treturn es5Transform.toLoader(result); // a single default export\n\t\t}\n\t\telse {\n\t\t\treturn exports === module.exports\n\t\t\t\t? exports // a set of named exports\n\t\t\t\t: es5Transform.toLoader(module.exports); // a single default export\n\t\t}\n\t};\n\n\tfunction amdRequire (id, callback, errback) {\n\t\tif (typeof id === 'string') {\n\t\t\treturn requireSync(id);\n\t\t}\n\t\telse {\n\t\t\treturn Promise.all(id.map(requireOne))\n\t\t\t\t.then(applyFactory, errback);\n\t\t}\n\t\tfunction applyFactory (modules) {\n\t\t\treturn callback.apply(null, modules);\n\t\t}\n\t}\n\n\tfunction requireSync (id) {\n\t\treturn id in scopedVars\n\t\t\t? scopedVars[id]\n\t\t\t: cjsRequire(id);\n\t}\n\n\tfunction requireOne (id) {\n\t\treturn id in scopedVars\n\t\t\t? scopedVars[id]\n\t\t\t: cjsRequire.async(id);\n\t}\n}\n\nfunction hasCjsExports (def) {\n\treturn def.depsList\n\t\t? hasCommonJSDep(def.depsList)\n\t\t: def.factory.length > 1;\n}\n\nfunction hasCommonJSDep (deps) {\n\t// check if module requires `module` or `exports`\n\tfor (var i = deps.length - 1; i >= 0; i--) {\n\t\tif (deps[i] === 'exports' || deps[i] === 'module') return true;\n\t}\n\treturn false;\n}\n\n});\n\n","modules":[{"pos":0,"count":106,"id":"rave@0.4.3/lib/amd/factory","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/es5Transform","pos":275,"count":28},{"id":"rave@0.4.3/lib/createRequire","pos":325,"count":29}]}],"compileTime":"2014-11-17T20:58:47.373Z"}