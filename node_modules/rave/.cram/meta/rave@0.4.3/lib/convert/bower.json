{"absId":"rave@0.4.3/lib/convert/bower","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/convert/bower","loader":true,"source":"define('rave@0.4.3/lib/convert/bower',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar common = require('./common');\nvar path = require('../path');\n\nvar transform = common.transform;\nvar createDeps = common.createDeps;\n\n// main exports\n\nexports.convert = bowerConvert;\n\n// exports for testing\n\nexports.bowerFixups = bowerFixups;\n\nfunction bowerConvert (data) {\n\treturn bowerFixups(transform(data));\n}\n\nfunction bowerFixups (data) {\n\tvar metadata = data.metadata;\n\tif (metadata.moduleType) {\n\t\tdata.moduleType = metadata.moduleType;\n\t}\n\tdata.main = path.removeExt(bowerFindJsMain(data));\n\treturn bowerAdjustLocation(data);\n}\n\nfunction bowerFindJsMain (data) {\n\tvar mains, i;\n\tmains = data.main;\n\tif (mains && typeof mains === 'object') {\n\t\tfor (i = 0; i < mains.length; i++) {\n\t\t\tif (mains[i].slice(-3) === '.js') return mains[i];\n\t\t}\n\t}\n\treturn mains || data.name;\n}\n\nfunction bowerAdjustLocation (data) {\n\tvar metadata, mainPath;\n\tmetadata = data.metadata;\n\tif (metadata.directories && metadata.directories.lib) {\n\t\tdata.location = metadata.directories.lib;\n\t}\n\telse {\n\t\tmainPath = path.splitDirAndFile(data.main);\n\t\tif (mainPath[0]) {\n\t\t\tdata.location = path.joinPaths(data.location, mainPath[0]);\n\t\t\tdata.main = mainPath[1];\n\t\t}\n\t}\n\treturn data;\n}\n\n});\n\n","modules":[{"pos":0,"count":108,"id":"rave@0.4.3/lib/convert/bower","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/convert/common","pos":242,"count":19},{"id":"rave@0.4.3/lib/path","pos":274,"count":18}]}],"compileTime":"2014-11-17T20:58:47.366Z"}