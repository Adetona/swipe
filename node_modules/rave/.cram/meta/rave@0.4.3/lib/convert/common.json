{"absId":"rave@0.4.3/lib/convert/common","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/convert/common","loader":true,"source":"define('rave@0.4.3/lib/convert/common',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar createUid = require('../uid').create;\n\n// main exports\n\nexports.transform = transformData;\n\n// exports for testing\n\nexports.createDepHashMap = createDepHashMap;\n\nfunction transformData (orig) {\n\tvar metadata, clone;\n\n\t// create overridable copy of metadata\n\tmetadata = orig.metadata || {}; // metadata can be null for bower\n\n\t// copy some useful crawling data\n\tclone = {\n\t\tmetadata: metadata,\n\t\tname: metadata.name || orig.name,\n\t\tmain: metadata.main,\n\t\tversion: metadata.version || '0.0.0',\n\t\trave: metadata.rave,\n\t\tpmType: orig.pmType,\n\t\tfileType: orig.fileType,\n\t\tlocation: orig.rootUrl, // renamed!\n\t\tdepFolder: orig.depFolder\n\t};\n\n\t// add uid\n\tclone.uid = createUid(clone);\n\n\t// convert children array to deps hashmap\n\tclone.deps = createDepHashMap(orig);\n\n\treturn clone;\n}\n\nfunction createDepHashMap (data) {\n\treturn data.children.reduce(function (hashMap, child) {\n\t\thashMap[child.name] = child.uid;\n\t\treturn hashMap;\n\t}, {});\n}\n\n});\n\n","modules":[{"pos":0,"count":109,"id":"rave@0.4.3/lib/convert/common","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/uid","pos":246,"count":17}]}],"compileTime":"2014-11-17T20:58:47.346Z"}