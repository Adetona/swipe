{"absId":"rave@0.4.3/lib/debug/moduleType","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/debug/moduleType","loader":true,"source":"define('rave@0.4.3/lib/debug/moduleType',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar metadata = require('../metadata');\nvar findEs5ModuleTypes = require('../find/es5ModuleTypes');\n\nmodule.exports = moduleType;\n\nfunction moduleType (load) {\n\tvar pkg, type;\n\n\tpkg = metadata.findPackage(load.metadata.rave.packages, load.name);\n\ttype = metadata.moduleType(pkg);\n\n\tif (type) {\n\t\treturn type;\n\t}\n\telse {\n\t\tpkg.moduleType = guessModuleType(load) || ['globals']; // fix package\n\t\treturn metadata.moduleType(pkg); // try again :)\n\t}\n}\n\nfunction guessModuleType (load) {\n\ttry {\n\t\tvar evidence = findEs5ModuleTypes(load.source, true);\n\t\treturn evidence.isAmd && ['amd']\n\t\t\t|| evidence.isCjs && ['node'];\n\t}\n\tcatch (ex) {\n\t\tex.message += ' ' + load.name + ' ' + load.address;\n\t\tthrow ex;\n\t}\n}\n\n});\n\n","modules":[{"pos":0,"count":111,"id":"rave@0.4.3/lib/debug/moduleType","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/metadata","pos":247,"count":22},{"id":"rave@0.4.3/lib/find/es5ModuleTypes","pos":296,"count":33}]}],"compileTime":"2014-11-17T20:58:47.374Z"}