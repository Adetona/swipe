{"absId":"rave@0.4.3/lib/metadata","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/metadata","loader":true,"source":"define('rave@0.4.3/lib/metadata',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\nvar parseUid = require('./uid').parse;\nvar path = require('./path');\nvar beget = require('./beget');\n\nmodule.exports = {\n\tfindPackage: findPackageDescriptor,\n\tfindDepPackage: findDependentPackage,\n\tmoduleType: moduleType\n};\n\nfunction findPackageDescriptor (descriptors, fromModule) {\n\tvar parts, pkgName;\n\tparts = parseUid(fromModule);\n\tpkgName = parts.pkgUid || parts.pkgName;\n\treturn descriptors[pkgName];\n}\n\nfunction findDependentPackage (descriptors, fromPkg, depName) {\n\tvar parts, pkgName, depPkgUid;\n\n\t// ensure we have a package descriptor, not a uid\n\tif (typeof fromPkg === 'string') fromPkg = descriptors[fromPkg];\n\n\tparts = parseUid(depName);\n\tpkgName = parts.pkgUid || parts.pkgName;\n\n\tif (fromPkg && (pkgName === fromPkg.name || pkgName === fromPkg.uid)) {\n\t\t// this is the same the package\n\t\treturn fromPkg;\n\t}\n\telse {\n\t\t// get dep pkg uid\n\t\tdepPkgUid = fromPkg ? fromPkg.deps[pkgName] : pkgName;\n\t\treturn depPkgUid && descriptors[depPkgUid];\n\t}\n}\n\nfunction moduleType (descriptor) {\n\tvar moduleTypes;\n\n\tmoduleTypes = descriptor.moduleType;\n\n\tif (hasModuleType(moduleTypes, 'amd')) {\n\t\treturn 'amd';\n\t}\n\telse if (hasModuleType(moduleTypes, 'node')) {\n\t\treturn 'node';\n\t}\n\telse if (hasModuleType(moduleTypes, 'globals')) {\n\t\treturn 'globals';\n\t}\n\n}\n\nfunction hasModuleType (moduleTypes, type) {\n\treturn moduleTypes && moduleTypes.indexOf(type) >= 0;\n}\n\n});\n\n","modules":[{"pos":0,"count":103,"id":"rave@0.4.3/lib/metadata","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/uid","pos":238,"count":16},{"id":"rave@0.4.3/lib/path","pos":273,"count":17},{"id":"rave@0.4.3/lib/beget","pos":304,"count":18}]}],"compileTime":"2014-11-17T20:58:47.366Z"}