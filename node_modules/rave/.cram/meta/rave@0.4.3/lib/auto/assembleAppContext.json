{"absId":"rave@0.4.3/lib/auto/assembleAppContext","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/auto/assembleAppContext","loader":true,"source":"define('rave@0.4.3/lib/auto/assembleAppContext',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\nvar join = require('../path').joinPaths;\n\nmodule.exports = assembleAppContext;\n\nfunction assembleAppContext (context) {\n\t// TODO: if no main modules found, look for one in a conventional place\n\t// TODO: warn if multiple main modules were found, but only the first was run\n\tvar first;\n\n\tfirst = context.metadata[0]; // precondition: must be at least one\n\n\tcontext.app = {\n\t\tname: first.name,\n\t\tmain: join(first.name, first.main),\n\t\tmetadata: first\n\t};\n\n\treturn createEnv(context, first);\n}\n\nfunction createEnv (context, metadata) {\n\tvar metaEnv, key;\n\n\tif (!context.env) context.env = {};\n\n\tmetaEnv = metadata.metadata.rave;\n\tmetaEnv = metaEnv && metaEnv.env || {};\n\n\tfor (key in metaEnv) {\n\t\tcontext.env[key] = metaEnv[key];\n\t}\n\n\tif (!('debug' in context.env)) context.env.debug = true;\n\n\treturn context;\n}\n\n});\n\n","modules":[{"pos":0,"count":118,"id":"rave@0.4.3/lib/auto/assembleAppContext","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/path","pos":250,"count":18}]}],"compileTime":"2014-11-17T20:58:47.309Z"}