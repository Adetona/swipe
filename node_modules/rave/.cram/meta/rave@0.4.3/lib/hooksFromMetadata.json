{"absId":"rave@0.4.3/lib/hooksFromMetadata","pluginId":"curl/loader/cjsm11","resourceId":"rave@0.4.3/lib/hooksFromMetadata","loader":true,"source":"define('rave@0.4.3/lib/hooksFromMetadata',['require','exports','module'],function(require,exports,module,define){/** @license MIT License (c) copyright 2014 original authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\nvar parseUid = require('./uid').parse;\nvar createNormalizer = require('./createNormalizer');\nvar createVersionedIdTransform = require('./createVersionedIdTransform');\nvar createPackageMapper = require('./createPackageMapper');\nvar locatePackage = require('../pipeline/locatePackage');\n\nmodule.exports = hooksFromMetadata;\n\nfunction hooksFromMetadata (hooks, context) {\n\tvar metadataOverride;\n\n\tmetadataOverride = {\n\t\tpredicate: createIsConfigured(context),\n\t\thooks: {\n\t\t\tnormalize: createNormalizer(\n\t\t\t\tcreateVersionedIdTransform(context),\n\t\t\t\tcreatePackageMapper(context),\n\t\t\t\thooks.normalize\n\t\t\t),\n\t\t\tlocate: withContext(context, locatePackage), // hooks.locate not used\n\t\t\tfetch: hooks.fetch,\n\t\t\ttranslate: hooks.translate,\n\t\t\tinstantiate: hooks.instantiate\n\t\t}\n\t};\n\n\treturn [metadataOverride];\n}\n\nfunction createIsConfigured (context) {\n\tvar packages = context.packages;\n\treturn function isConfigured (arg) {\n\t\treturn parseUid(arg.name).pkgUid in packages;\n\t};\n}\n\nfunction withContext (context, func) {\n\treturn function (load) {\n\t\tload.metadata.rave = context;\n\t\treturn func.call(this, load);\n\t};\n}\n\n});\n\n","modules":[{"pos":0,"count":112,"id":"rave@0.4.3/lib/hooksFromMetadata","depList":["require","exports","module"],"factory":true,"argList":["require","exports","module","define"],"requires":[{"id":"rave@0.4.3/lib/uid","pos":247,"count":16},{"id":"rave@0.4.3/lib/createNormalizer","pos":294,"count":29},{"id":"rave@0.4.3/lib/createVersionedIdTransform","pos":358,"count":39},{"id":"rave@0.4.3/lib/createPackageMapper","pos":425,"count":32},{"id":"rave@0.4.3/pipeline/locatePackage","pos":479,"count":36}]}],"compileTime":"2014-11-17T20:58:47.376Z"}